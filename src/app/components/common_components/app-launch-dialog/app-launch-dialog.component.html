<div class="koki-data-wrapper" *ngIf="!isInstalled">
  <div class="koki-data-header-container">
    <p class="koki-data-header">{{appData.Name}}</p>
    <div class="koki-data margin20">
      <mat-tab-group [selectedIndex]="selected"
                     (selectedIndexChange)="showNextTab($event)">
        <mat-tab>
          <ng-template mat-tab-label>
            <i class="material-icons">build</i>Architecture
          </ng-template>
          <div class="appArchitectureImage generalBG" [style.backgroundImage]="'url('+appData.ArchitectureURL+')'"></div>
          <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px" class="marginTop20">
            <button mat-button (click)="dialogRef.close(false)">Close</button>
            <button mat-stroked-button (click)="showNextTab(1)" color="primary">Config</button>
          </div>
        </mat-tab>
        <mat-tab>
          <ng-template mat-tab-label>
            <i class="material-icons">settings</i>config
          </ng-template>
          <form class="addonTable">
            <div *ngFor="let config of appData.UserConfigs">
              <form class="marginTop20">
              <section *ngIf="config.Type === 'password' || config.Type === 'text'">
                <mat-form-field class="width100">
                  <input matInput [type]="config.Type" [placeholder]="config.Name" [name]="config.Name" [(ngModel)]="config.Value" />
                </mat-form-field>
              </section>
              <section *ngIf="config.Type === 'radio'">
                <mat-radio-group class="width100" [(ngModel)]="config.value" fxLayout="row" fxLayoutAlign="space-between center">
                  <mat-radio-button class="example-radio-button" *ngFor="let op of config.Data"  color="primary" [value]="op">
                    {{op}}
                  </mat-radio-button>
                </mat-radio-group>
              </section>
              <section *ngIf="config.Type === 'select'">
                <mat-form-field>
                  <mat-select placeholder="Select Replicas"  color="primary">
                    <mat-option *ngFor="let data of config.Data" [value]="data">
                      {{data}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </section>
              <section *ngIf="config.Type === 'checkbox'">
                <mat-checkbox class="example-margin" color="primary" [name]="config.Name" [(ngModel)]="config.Value">{{config.Name}}</mat-checkbox>
              </section>
              </form>
            </div>
          </form>
          <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px" class="marginTop20">

            <button mat-button (click)="dialogRef.close(false)">Close</button>
            <button mat-raised-button (click)="dialogRef.close(appData)" color="primary">Launch</button>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>

<div class="koki-data-wrapper" *ngIf="isInstalled">
  <div class="koki-data-header-container">
    <p class="koki-data-header">{{appData.Name}}</p>
    <div class="koki-data margin20">
      <mat-tab-group>
        <mat-tab>
          <ng-template mat-tab-label>
            <i class="material-icons">build</i>Architecture
          </ng-template>
          <div class="appArchitectureImage generalBG" [style.backgroundImage]="'url('+appData.ArchitectureURL+')'"></div>
          <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px" class="marginTop20">
            <button mat-button (click)="dialogRef.close(false)">Close</button>
          </div>
        </mat-tab>
        <mat-tab>
          <ng-template mat-tab-label>
            <i class="material-icons">add_circle</i>Add-ons
          </ng-template>
          <div class="addonTable">
            <table mat-table [dataSource]="dataSource">

              <!-- Checkbox Column -->
              <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef>
                  <mat-checkbox (change)="$event ? masterToggle() : null"
                                [checked]="selection.hasValue() && isAllSelected()"
                                [indeterminate]="selection.hasValue() && !isAllSelected()" color="primary">
                  </mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let row">
                  <mat-checkbox (click)="$event.stopPropagation()"
                                (change)="$event ? selection.toggle(row) : null"
                                [checked]="selection.isSelected(row)"  color="primary">
                  </mat-checkbox>
                </td>
              </ng-container>

              <!-- Name Column -->
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Name </th>
                <td mat-cell *matCellDef="let element"> {{element.name}} </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="details">
                <th mat-header-cell *matHeaderCellDef> Details </th>
                <td mat-cell *matCellDef="let element"> {{element.details}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="price">
                <th mat-header-cell *matHeaderCellDef> Price </th>
                <td mat-cell *matCellDef="let element"> ${{element.price}} </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                  (click)="selection.toggle(row)">
              </tr>
            </table>
          </div>
          <div class="dataAggrigation" fxLayout="row" fxLayoutAlign="space-between center">
            <p class="text16">Selected: {{selection.selected.length}}</p>
            <p class="text16">Total: ${{totalPrice}}</p>
          </div>
          <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px" class="marginTop20">
            <button mat-button (click)="dialogRef.close(false)">Close</button>
            <button *ngIf="selection.selected.length" color="primary" mat-raised-button (click)="dialogRef.close(selection.selected)">Launch</button>
          </div>
        </mat-tab>
        <mat-tab>
          <ng-template mat-tab-label>
            <i class="material-icons">settings</i>config
          </ng-template>
          <form class="addonTable">
            <div *ngFor="let config of appData.UserConfigs">
              <form class="marginTop20">
                <section *ngIf="config.Type === 'password' || config.Type === 'text'">
                  <mat-form-field class="width100">
                    <input matInput [type]="config.Type" [placeholder]="config.Name" [name]="config.Name" [(ngModel)]="config.Value" />
                  </mat-form-field>
                </section>
                <section *ngIf="config.Type === 'radio'">
                  <mat-radio-group class="width100" [(ngModel)]="config.value" fxLayout="row" fxLayoutAlign="space-between center">
                    <mat-radio-button class="example-radio-button" *ngFor="let op of config.Data"  color="primary" [value]="op">
                      {{op}}
                    </mat-radio-button>
                  </mat-radio-group>
                </section>
                <section *ngIf="config.Type === 'select'">
                  <mat-form-field>
                    <mat-select placeholder="Select Replicas"  color="primary">
                      <mat-option *ngFor="let data of config.Data" [value]="data">
                        {{data}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </section>
                <section *ngIf="config.Type === 'checkbox'">
                  <mat-checkbox class="example-margin" color="primary" [name]="config.Name" [(ngModel)]="config.Value">{{config.Name}}</mat-checkbox>
                </section>
              </form>
            </div>
          </form>

          <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px" class="marginTop20">

            <button mat-button (click)="dialogRef.close(false)">Close</button>
            <button mat-raised-button (click)="dialogRef.close(appData)" color="primary">Update</button>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>

